Покупатели, сталкиваясь с некорректной или неактуальной информацией на ценниках в магазинах, теряют лояльность, а это приводит к репутационным издержкам и убыткам. Информация на ценниках — это публичная оферта, поэтому за недостоверную информацию можно получить штрафы.

Со слов представителей магазинов, информация о товарах может обновляться каждую неделю или даже чаще, а проверка ценников занимает не менее нескольких часов.

Сейчас распространены такие способы проверки ценников:

    Ручная проверка.

        плюсы: дёшево, если работники успевают всё сделать вовремя.

        минусы: трудоёмко, высокая вероятность совершения ошибки, нужно доплачивать персоналу за переработки.

    Проверка с применением терминалов сбора данных (ТСД).

        плюсы: частичная автоматизация процесса, ниже временные затраты.

        минусы: высокая стоимость ТСД и ПО для них, не исключены ошибки из-за человеческого фактора.

    Электронные ценники.

        плюсы: полная автоматизация, за них может отвечать буквально несколько человек.

        минусы: дорого.

Все подходы обладают существенными минусами, поэтому хочется создать принципиально новое решение. Тут на помощь приходят нейронные сети и искусственный интеллект. Используя их можно почти полностью автоматизировать процесс проверки и свести на нет ошибки из-за человеческого фактора, так как само ПО будет анализировать ценники. ИИ позволит перенести процесс с дорогих ТСД на более дешёвые мобильные телефоны и уменьшить временные затраты. Всё, что нужно сделать работнику — это навести телефон на ценник, нажать кнопку и заменить ценник в случае несовпадения.

Хотя нейронные сети для анализа ценников используются не так часто, в разных странах мира (например, в Малайзии, Украине, Китае) ведутся исследования на эту тему [1-3]. На данный момент на рынке представлены следующие решения, позволяющие анализировать информацию на ценниках:

    price tag scanning, OCR & data capturing от Klippa — это ПО для получения информации с ценников, нацеленное на розничных клиентов магазинов. Достоинства: высокая точность распознавания, возможность использовать разные форматы вывода (JSON, CSV, XLSX, XML). Недостаток: небольшое число поддерживаемых языков может ограничить аудиторию нашего решения в будущем. 

    price tag recognition: a smartphone instead of a pdt от Neti — ПО для автоматизации сравнения цены с информацией в базе данных. Оно нацелено на владельцев магазинов и работников. Достоинства: низкий порог вхождения и высокая точность распознавания. Недостаток: отсутствие возможности распознавания описания товара.

Недостатки этого ПО кажутся нам существенными, поэтому мы решили создать свой проект, нацеленный на автоматизацию проверки ценников с учетом не только цены, но и описания товара.
Алгоритм и методы

 Планируемый алгоритм работы проекта:

    получение изображения ценника с камеры телефона;

    сегментация изображения для выделения областей, содержащих нужную информацию;

    вырезание полученных сегментов;

    применение оптического распознавания символов (OCR) в выделенных областях;

    сравнение реальной информации с информацией представленной на ценнике;

    возврат результатов пользователю.

Для обучения нейронных сетей была собрана база изображений ценников сети магазинов “Лента”.  Всего было собрано порядка 250 фотографий. Для каждого изображения размечались следующие сегменты (см. рисунок 1):

    Measure — общая информация о количестве товара (например, «80 г» приправы Роллтон);

    Measure_num — количество товара;

    Measure_name — наименование единицы количества;

    Price_card — цена товара по скидочной карте Лента;

    Price — цена товара без учёта скидочной карты. Покупатели, сталкиваясь с некорректной или неактуальной информацией на ценниках в магазинах, теряют лояльность, а это приводит к репутационным издержкам и убыткам. Информация на ценниках — это публичная оферта, поэтому за недостоверную информацию можно получить штрафы.

Со слов представителей магазинов, информация о товарах может обновляться каждую неделю или даже чаще, а проверка ценников занимает не менее нескольких часов.

Сейчас распространены такие способы проверки ценников:

    Ручная проверка.

        плюсы: дёшево, если работники успевают всё сделать вовремя.

        минусы: трудоёмко, высокая вероятность совершения ошибки, нужно доплачивать персоналу за переработки.

    Проверка с применением терминалов сбора данных (ТСД).

        плюсы: частичная автоматизация процесса, ниже временные затраты.

        минусы: высокая стоимость ТСД и ПО для них, не исключены ошибки из-за человеческого фактора.

    Электронные ценники.

        плюсы: полная автоматизация, за них может отвечать буквально несколько человек.

        минусы: дорого.

Все подходы обладают существенными минусами, поэтому хочется создать принципиально новое решение. Тут на помощь приходят нейронные сети и искусственный интеллект. Используя их можно почти полностью автоматизировать процесс проверки и свести на нет ошибки из-за человеческого фактора, так как само ПО будет анализировать ценники. ИИ позволит перенести процесс с дорогих ТСД на более дешёвые мобильные телефоны и уменьшить временные затраты. Всё, что нужно сделать работнику — это навести телефон на ценник, нажать кнопку и заменить ценник в случае несовпадения.

Хотя нейронные сети для анализа ценников используются не так часто, в разных странах мира (например, в Малайзии, Украине, Китае) ведутся исследования на эту тему [1-3]. На данный момент на рынке представлены следующие решения, позволяющие анализировать информацию на ценниках:

    price tag scanning, OCR & data capturing от Klippa — это ПО для получения информации с ценников, нацеленное на розничных клиентов магазинов. Достоинства: высокая точность распознавания, возможность использовать разные форматы вывода (JSON, CSV, XLSX, XML). Недостаток: небольшое число поддерживаемых языков может ограничить аудиторию нашего решения в будущем. 

    price tag recognition: a smartphone instead of a pdt от Neti — ПО для автоматизации сравнения цены с информацией в базе данных. Оно нацелено на владельцев магазинов и работников. Достоинства: низкий порог вхождения и высокая точность распознавания. Недостаток: отсутствие возможности распознавания описания товара.

Недостатки этого ПО кажутся нам существенными, поэтому мы решили создать свой проект, нацеленный на автоматизацию проверки ценников с учетом не только цены, но и описания товара.
Алгоритм и методы

 Планируемый алгоритм работы проекта:

    получение изображения ценника с камеры телефона;

    сегментация изображения для выделения областей, содержащих нужную информацию;

    вырезание полученных сегментов;

    применение оптического распознавания символов (OCR) в выделенных областях;

    сравнение реальной информации с информацией представленной на ценнике;

    возврат результатов пользователю.

Для обучения нейронных сетей была собрана база изображений ценников сети магазинов “Лента”.  Всего было собрано порядка 250 фотографий. Для каждого изображения размечались следующие сегменты (см. рисунок 1):

    Measure — общая информация о количестве товара (например, «80 г» приправы Роллтон);

    Measure_num — количество товара;

    Measure_name — наименование единицы количества;

    Price_card — цена товара по скидочной карте Лента;

    Price — цена товара без учёта скидочной карты. Важной функцией клиентского приложения является обрезка изображения по размерам ценника для уменьшения лишней информации. Это позволяет ускорить процесс обработки изображения нейронными сетями, а также снижает вероятность возникновения ошибок, связанных с сегментацией.

Поэтому при запуске камеры выводится оверлей с областью, в которой должен находится ценник. После фотографирования размеры и расположение выделяемой области ценника переносится на изображение, после чего происходит обрезка. Это позволяет избежать проблем с позиционированием ценника в кадре.
Обсуждение результатов

Для расчета точности работы нейронной сети были использованы следующие метрики: MAPE для числовых сегментов (1), соотношение правильно распознанных символов к общему числу символов для текстовых сегментов (2) и соотношение распознанных штрихкодов к общему количеству штрихкодов (3). Итоговая точность работы нейронной сети рассчитывается как среднее арифметическое между всеми ранее названными метриками (4) и представлена в таблице 2.

Среднее время обработки запроса сервером составило 9-11 сек из-за того, что она производится на CPU. Расширить датасет, набранный вручную, можно с помощью сохранения полученных сервером изображений и координат полученных сегментов (в случае их удачного нахождения). В дальнейшем это позволит дообучить нейронные сети и повысить точность распознавания. Дальнейшая работа будет направлена на добавление необходимого функционала для сравнения данных, а именно работа с базами данных.

В перспективе мы бы хотели перенести расчеты на мобильные устройства, чтобы уменьшить стоимость поддержания системы и в идеале обрабатывать изображения в реальном времени, без созданий фотографий.

Ну и в завершение хотелось бы выразить свою благодарность образовательному проекту «‎IT Академия Samsung»‎, флагману глобальной программы Samsung Innovation Campus, за предоставленную возможность освоить навыки проектирования и разработки проекта с нейронными сетями, а также нашим кураторам за многочисленные советы по улучшению проекта и общее хорошее настроение.